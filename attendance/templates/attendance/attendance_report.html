{% extends 'accounts/base.html' %}
{% block content %}
<div class="max-w-6xl mx-auto p-6 bg-white rounded-2xl shadow-md">
  <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">ðŸ“Š Attendance Report</h1>

  <table class="w-full border-collapse">
    <thead class="bg-indigo-600 text-white">
      <tr>
        <th class="p-3 text-left rounded-tl-lg">Class</th>
        <th class="p-3 text-left">Total Students</th>
        <th class="p-3 text-center">Attendance Summary</th>
        <th class="p-3 text-right rounded-tr-lg">Attendance Rate</th>
      </tr>
    </thead>
    <tbody>
      {% for row in report_data %}
      <tr class="border-b hover:bg-gray-50 transition">
        <td class="p-3 font-semibold text-indigo-600 hover:underline">
  <a href="{% url 'attendance:class_attendance_detail' row.class.id %}">
    {{ row.class.name }}
  </a>
</td>

        <td class="p-3 text-gray-600">{{ row.total }}</td>
        <td class="p-3 text-center">
          <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">
            {{ row.present }} Present
          </span>
          <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold ml-2">
            {{ row.absent }} Absent
          </span>
        </td>
        <td class="p-3 text-right">
          {% if row.total > 0 %}
            {% with percent=row.present|divisibleby:row.total %}
            <span class="text-gray-700 font-medium">
              {{ row.present|floatformat:2 }} / {{ row.total }}
            </span>
            {% endwith %}
          {% else %}
            <span class="text-gray-400 italic">No data</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="p-6 text-center text-gray-500 italic">
          No attendance data available.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
