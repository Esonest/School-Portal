{% extends "accounts/base.html" %}

{% block content %}

<style>
/* ===================== */
/* LIGHT MODE ONLY */
/* ===================== */
</style>

<div class="max-w-7xl mx-auto px-4 py-8 space-y-8">

  <!-- ========================== -->
  <!-- HEADER -->
  <!-- ========================== -->
  <div class="bg-white border rounded-2xl p-6 shadow flex flex-col md:flex-row justify-between md:items-center gap-4">
    <h2 class="text-2xl font-bold text-{{ school.theme_color }}-700">
      All Classes â€” {{ school.name }}
    </h2>
  </div>

  <!-- ========================== -->
  <!-- FILTER BAR -->
  <!-- ========================== -->
  <form method="get"
        class="bg-white border rounded-xl p-4 shadow flex flex-col md:flex-row gap-4">

    <!-- Session Selector -->
    <select name="session" class="border rounded px-3 py-2 w-full md:w-56">
      <option value="">Select Session</option>
      {% for s in sessions %}
        <option value="{{ s }}" {% if s == selected_session %}selected{% endif %}>
          {{ s }}
        </option>
      {% endfor %}
    </select>

    <!-- Term Selector -->
    <select name="term" class="border rounded px-3 py-2 w-full md:w-56">
      <option value="">Select Term</option>
      <option value="1" {% if selected_term == "1" %}selected{% endif %}>First Term</option>
      <option value="2" {% if selected_term == "2" %}selected{% endif %}>Second Term</option>
      <option value="3" {% if selected_term == "3" %}selected{% endif %}>Third Term</option>
      <option value="cumulative" {% if selected_term == "cumulative" %}selected{% endif %}>
        Cumulative
      </option>
    </select>

    <button class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
      Filter
    </button>
  </form>

  <!-- ========================== -->
  <!-- CLASSES GRID -->
  <!-- ========================== -->
  <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

    {% for c in classes %}
    <li class="bg-white border rounded-xl shadow p-5 flex flex-col justify-between hover:shadow-lg transition">

      <div class="mb-4">
        <h3 class="text-lg font-semibold text-gray-800">
          {{ c.name }}
        </h3>
      </div>

      <div class="flex flex-wrap gap-2 text-sm">

        <!-- View Students -->
        <a href="{% url 'school_admin:admin-class-students' c.id %}?term={{ selected_term }}&session={{ selected_session }}"
           class="px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition">
          View Students
        </a>

        <!-- Cumulative Results -->
        {% if selected_session and selected_term == "cumulative" %}
        <a href="{% url 'school_admin:admin-class-cumulative' c.id %}?session={{ selected_session }}"
           class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition">
          Cumulative Results
        </a>
        {% endif %}

        <!-- Promote Class -->
        <a href="{% url 'school_admin:promote_students' c.id %}?from={{ selected_session }}"
           class="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition">
          Promote Class
        </a>

      </div>

    </li>
    {% empty %}
    <li class="col-span-full text-center text-gray-500 py-10">
      No classes available.
    </li>
    {% endfor %}

  </ul>

</div>

{% endblock %}
