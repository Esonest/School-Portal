{% extends "accounts/base.html" %}

{% block content %}

<style>
/* ===================== */
/* DARK MODE SUPPORT */
/* ===================== */
.dark body {
  background-color: #0f172a;
  color: #e5e7eb;
}
.dark .card,
.dark table,
.dark select,
.dark input {
  background-color: #020617 !important;
  color: #e5e7eb;
}
.dark thead {
  background-color: #020617 !important;
}
</style>

<div class="max-w-7xl mx-auto px-4 py-8 space-y-6">

  <!-- ========================== -->
  <!-- HEADER -->
  <!-- ========================== -->
  <div class="flex flex-col md:flex-row justify-between items-center gap-4 bg-white dark:bg-slate-900 border rounded-2xl p-6 shadow">
    <h2 class="text-2xl font-bold text-{{ school.theme_color }}-700">
      School Accountants
    </h2>

    <a href="{% url 'school_admin:accountant_create' school.id %}"
       class="px-4 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition">
       + Add Accountant
    </a>
  </div>

  <!-- ========================== -->
  <!-- ACCOUNTANTS TABLE -->
  <!-- ========================== -->
  <div class="overflow-x-auto bg-white dark:bg-slate-900 border rounded-xl shadow">
    <table class="w-full min-w-max divide-y divide-gray-200">
      <thead class="bg-gray-100 dark:bg-slate-800">
        <tr>
          <th class="p-3 text-left">Name</th>
          <th class="p-3 text-left">Email</th>
          <th class="p-3 text-left">Staff ID</th>
          <th class="p-3 text-left">Status</th>
          <th class="p-3 text-left">Actions</th>
        </tr>
      </thead>
      <tbody class="bg-white dark:bg-slate-900 divide-y divide-gray-100">
        {% for a in accountants %}
        <tr class="hover:bg-gray-50 dark:hover:bg-slate-800 transition">
          <td class="p-3 font-medium">{{ a.user.get_full_name }}</td>
          <td class="p-3 text-sm">{{ a.user.email }}</td>
          <td class="p-3 text-sm">{{ a.staff_id }}</td>
          <td class="p-3">
            {% if a.is_active %}
              <span class="text-green-600">Active</span>
            {% else %}
              <span class="text-red-600">Inactive</span>
            {% endif %}
          </td>
          <td class="p-3 space-x-2 text-sm">
            <a href="{% url 'school_admin:accountant_update' a.id %}" class="text-blue-600 hover:underline">Edit</a>
            |
            <a href="{% url 'school_admin:accountant_toggle' a.id %}" class="text-orange-600 hover:underline">Toggle</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="p-6 text-center text-gray-500">No accountants</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
