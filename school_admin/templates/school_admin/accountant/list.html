{% extends "accounts/base.html" %}

{% block content %}

<style>
/* Light + subtle dark mode friendly colors */
body {
  background-color: #f9fafb; /* light gray for light mode */
  color: #111827; /* dark text */
}

.card, table, select, input {
  background-color: #ffffff; /* white cards */
  color: #111827;
  border-color: #d1d5db;
}

table th {
  background-color: #f3f4f6; /* slightly muted gray header */
  color: #111827;
}

table td {
  color: #374151;
}

a {
  color: #2563eb; /* blue links */
}

a:hover {
  text-decoration: underline;
}

.hover\:bg-gray-50:hover {
  background-color: #f9fafb;
}

.hover\:bg-slate-100:hover {
  background-color: #f3f4f6;
}

/* subtle borders for tables */
table th, table td {
  border-bottom: 1px solid #e5e7eb;
}
</style>

<div class="max-w-7xl mx-auto px-4 py-8 space-y-6">

  <!-- ========================== -->
  <!-- HEADER -->
  <!-- ========================== -->
  <div class="flex flex-col md:flex-row justify-between items-center gap-4
              bg-white border rounded-2xl p-6 shadow">
    <h2 class="text-2xl font-bold text-{{ school.theme_color }}-700">
      School Accountants
    </h2>

    <a href="{% url 'school_admin:accountant_create' school.id %}"
       class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700
              text-white rounded-lg shadow transition">
       + Add Accountant
    </a>
  </div>

  <!-- ========================== -->
  <!-- ACCOUNTANTS TABLE -->
  <!-- ========================== -->
  <div class="overflow-x-auto bg-white border rounded-xl shadow">
    <table class="w-full min-w-max divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="p-3 text-left font-semibold">Name</th>
          <th class="p-3 text-left font-semibold">Email</th>
          <th class="p-3 text-left font-semibold">Staff ID</th>
          <th class="p-3 text-left font-semibold">Status</th>
          <th class="p-3 text-left font-semibold">Actions</th>
        </tr>
      </thead>

      <tbody class="divide-y divide-gray-100">
        {% for a in accountants %}
        <tr class="hover:bg-gray-50 transition">
          <td class="p-3 font-medium">
            {{ a.user.get_full_name }}
          </td>

          <td class="p-3 text-sm text-gray-600">
            {{ a.user.email }}
          </td>

          <td class="p-3 text-sm text-gray-600">
            {{ a.staff_id }}
          </td>

          <td class="p-3 font-medium">
            {% if a.is_active %}
              <span class="text-green-600">Active</span>
            {% else %}
              <span class="text-red-600">Inactive</span>
            {% endif %}
          </td>

          <td class="p-3 space-x-2 text-sm">
            <a href="{% url 'school_admin:accountant_update' a.id %}"
               class="text-blue-600 hover:underline">
              Edit
            </a>
            |
            <a href="{% url 'school_admin:accountant_toggle' a.id %}"
               class="text-orange-600 hover:underline">
              Toggle
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5"
              class="p-6 text-center text-gray-500">
            No accountants
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
