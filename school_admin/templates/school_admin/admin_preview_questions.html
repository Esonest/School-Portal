{% extends "accounts/base.html" %}
{% block content %}

<div class="min-h-screen bg-gray-100 px-4 py-6">

  <!-- HEADER -->
  <div class="max-w-7xl mx-auto mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800">
      Preview Questions â€“ {{ exam.title }}
    </h1>

    <a href="{% url 'school_admin:bulk_question_admin' school.id exam.id %}"
       class="inline-flex items-center justify-center px-5 py-2
              bg-blue-600 text-white font-semibold rounded-lg
              shadow hover:bg-blue-700 transition">
      + Add More Questions
    </a>
  </div>

  <!-- ================= MOBILE ================= -->
  <div class="md:hidden max-w-7xl mx-auto space-y-4">
    {% for q in questions %}
      <div class="bg-white border rounded-xl shadow p-4 space-y-3">

        <div class="flex justify-between items-center">
          <span class="text-sm font-semibold text-gray-500">
            Question {{ forloop.counter }}
          </span>
          <span class="px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700">
            {{ q.marks }} Marks
          </span>
        </div>

        <!-- Question -->
        <div class="font-medium text-gray-800 leading-relaxed">
          {{ q.text|safe }}
        </div>

        {% if q.equation %}
          <div class="mt-2 text-lg mathjax">
            {{ q.equation }}
          </div>
        {% endif %}

        <!-- Options -->
        <div class="text-sm text-gray-700 space-y-2 mt-2">
          <div><strong>A:</strong> {{ q.option_a|safe }}</div>
          <div><strong>B:</strong> {{ q.option_b|safe }}</div>

          {% if q.option_c %}
            <div><strong>C:</strong> {{ q.option_c|safe }}</div>
          {% endif %}

          {% if q.option_d %}
            <div><strong>D:</strong> {{ q.option_d|safe }}</div>
          {% endif %}
        </div>

        <div class="text-sm font-semibold text-green-700">
          Correct Answer: {{ q.correct_option }}
        </div>

      </div>
    {% empty %}
      <p class="text-center text-gray-500 py-10">
        No questions added yet.
      </p>
    {% endfor %}
  </div>

  <!-- ================= DESKTOP ================= -->
  <div class="hidden md:block max-w-7xl mx-auto bg-white rounded-xl shadow border overflow-hidden">
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm text-left border-collapse">

        <thead class="bg-gray-50 border-b">
          <tr>
            <th class="px-4 py-3 font-semibold text-gray-700">#</th>
            <th class="px-4 py-3 font-semibold text-gray-700">Question</th>
            <th class="px-4 py-3 font-semibold text-gray-700">Options</th>
            <th class="px-4 py-3 font-semibold text-gray-700">Correct</th>
            <th class="px-4 py-3 font-semibold text-gray-700 text-center">Marks</th>
          </tr>
        </thead>

        <tbody class="divide-y">
          {% for q in questions %}
          <tr class="hover:bg-gray-50 transition">
            <td class="px-4 py-3 font-medium text-gray-600">
              {{ forloop.counter }}
            </td>

            <!-- Question -->
            <td class="px-4 py-3 text-gray-800 max-w-md">
              <div class="leading-relaxed">
                {{ q.text|safe }}
              </div>

              {% if q.equation %}
                <div class="mt-2 text-lg mathjax">
                  {{ q.equation }}
                </div>
              {% endif %}
            </td>

            <!-- Options -->
            <td class="px-4 py-3 text-gray-700 space-y-2">
              <div><strong>A:</strong> {{ q.option_a|safe }}</div>
              <div><strong>B:</strong> {{ q.option_b|safe }}</div>

              {% if q.option_c %}
                <div><strong>C:</strong> {{ q.option_c|safe }}</div>
              {% endif %}

              {% if q.option_d %}
                <div><strong>D:</strong> {{ q.option_d|safe }}</div>
              {% endif %}
            </td>

            <!-- Correct -->
            <td class="px-4 py-3 font-semibold text-green-700">
              {{ q.correct_option }}
            </td>

            <!-- Marks -->
            <td class="px-4 py-3 text-center text-gray-700">
              {{ q.marks }}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="py-10 text-center text-gray-500">
              No questions added yet.
            </td>
          </tr>
          {% endfor %}
        </tbody>

      </table>
    </div>
  </div>

</div>

{% endblock %}
