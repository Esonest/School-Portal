<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}TECHCENTER School Portal{% endblock %}</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Static Files -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    {% block extra_head %}{% endblock %}
</head>

<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">

    <!-- FLASH MESSAGES -->
    {% if messages %}
    <div class="fixed top-4 inset-x-0 z-50 px-4">
        <div class="max-w-xl mx-auto space-y-3">
            {% for message in messages %}
            <div class="px-4 py-3 rounded-lg text-sm font-medium text-center shadow-lg
                {% if message.tags == 'error' %}
                  bg-red-100 text-red-700 border border-red-300
                {% elif message.tags == 'success' %}
                  bg-green-100 text-green-700 border border-green-300
                {% else %}
                  bg-gray-100 text-gray-700 border border-gray-300
                {% endif %}
            animate-fade-in">
                {{ message }}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- NAVBAR -->
    <nav class="bg-white shadow-md sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">

                <!-- LOGO -->
                <a href="{% url 'accounts:home' %}"
                   class="text-lg sm:text-xl font-bold text-blue-600 hover:text-blue-800 transition whitespace-nowrap">
                    üè´ TECHCENTER School Portal
                </a>

                <!-- DESKTOP LINKS -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="{% url 'accounts:home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">Home</a>
                    <a href="{% url 'accounts:about' %}" class="nav-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}">About</a>
                    <a href="{% url 'accounts:contact' %}" class="nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}">Contact</a>
                    <a href="{% url 'accounts:help' %}" class="nav-link {% if request.resolver_match.url_name == 'help' %}active{% endif %}">Help</a>

                    {% if user.is_authenticated %}
                    <a href="{% url 'accounts:logout' %}" class="text-red-500 font-medium hover:text-red-700">Logout</a>
                    {% else %}
                    <a href="{% url 'accounts:login' %}" class="text-green-600 font-medium hover:text-green-800">Login</a>
                    {% endif %}
                </div>

                <!-- MOBILE BUTTON -->
                <button id="mobile-menu-button"
                        class="md:hidden text-gray-700 text-2xl focus:outline-none">
                    ‚ò∞
                </button>
            </div>
        </div>

        <!-- MOBILE MENU -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t shadow-lg animate-slide-down">
            <a href="{% url 'accounts:home' %}" class="mobile-link">Home</a>
            <a href="{% url 'accounts:about' %}" class="mobile-link">About</a>
            <a href="{% url 'accounts:contact' %}" class="mobile-link">Contact</a>
            <a href="{% url 'accounts:help' %}" class="mobile-link">Help</a>

            {% if user.is_authenticated %}
            <a href="{% url 'accounts:logout' %}" class="mobile-link text-red-600">Logout</a>
            {% else %}
            <a href="{% url 'accounts:login' %}" class="mobile-link text-green-600">Login</a>
            {% endif %}
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-grow max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-800 text-white py-4">
        <div class="text-center text-xs sm:text-sm opacity-90">
            ¬© {{ year|default:2025 }} TECHCENTER School Portal ‚Äî All Rights Reserved.
        </div>
    </footer>

    <!-- STYLES -->
    <style>
      .nav-link {
        font-medium;
        transition: color 0.3s;
      }
      .nav-link:hover {
        color: #2563eb;
      }
      .active {
        color: #2563eb;
        text-decoration: underline;
      }
      .mobile-link {
        display: block;
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #f1f5f9;
        transition: background 0.2s;
      }
      .mobile-link:hover {
        background: #f8fafc;
      }
      .animate-slide-down {
        animation: slideDown 0.3s ease;
      }
      .animate-fade-in {
        animation: fadeIn 0.6s ease;
      }
      @keyframes slideDown {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
    </style>

    <!-- MOBILE MENU SCRIPT -->
    <script>
      document.getElementById("mobile-menu-button").addEventListener("click", () => {
        document.getElementById("mobile-menu").classList.toggle("hidden");
      });
    </script>

</body>
</html>
