{% extends 'accounts/base.html' %}

{% block title %}Portal Selection - TECHCENTER School Portal{% endblock %}

{% block content %}

<!-- HERO SECTION -->
<section class="relative h-56 sm:h-64 md:h-72 lg:h-80 bg-cover bg-center flex flex-col justify-center items-center"
         style="background-image: url('https://images.unsplash.com/photo-1581091215366-8b39cfe55c19');">
  <!-- Gradient overlay for readability -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/50 to-black/70 sm:from-black/70 sm:via-black/60 sm:to-black/80"></div>

  <div class="relative z-10 text-center px-4 sm:px-6 max-w-3xl">
    <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-white drop-shadow-lg break-words leading-tight">
      Welcome, {{ request.user.get_full_name }} ğŸ‘‹
    </h2>
    <p class="mt-2 sm:mt-3 text-sm sm:text-base md:text-lg text-gray-200 drop-shadow-md">
      Select the portal you want to access below
    </p>
  </div>
</section>


<!-- STAT COUNTERS -->
<section class="py-10 sm:py-12 bg-gray-50 dark:bg-gray-900 px-4">
  <div class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 text-center">
    {% comment %} Stat Cards {% endcomment %}
    <div class="bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6">
      <h3 class="text-3xl font-bold text-indigo-600" x-data="{ count: 0 }" x-init="setInterval(() => { if(count<1200) count += Math.ceil(1200/100); $el.innerText = count }, 20)">0</h3>
      <p class="mt-2 text-gray-600 dark:text-gray-300">Active Students</p>
    </div>
    <div class="bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6">
      <h3 class="text-3xl font-bold text-green-600" x-data="{ count: 0 }" x-init="setInterval(() => { if(count<85) count += 1; $el.innerText = count }, 50)">0</h3>
      <p class="mt-2 text-gray-600 dark:text-gray-300">Teachers Online</p>
    </div>
    <div class="bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6">
      <h3 class="text-3xl font-bold text-purple-600" x-data="{ count: 0 }" x-init="setInterval(() => { if(count<12) count += 1; $el.innerText = count }, 150)">0</h3>
      <p class="mt-2 text-gray-600 dark:text-gray-300">Exams Today</p>
    </div>
    <div class="bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6">
      <h3 class="text-3xl font-bold text-pink-600" x-data="{ count: 0 }" x-init="setInterval(() => { if(count<56) count += 1; $el.innerText = count }, 50)">0</h3>
      <p class="mt-2 text-gray-600 dark:text-gray-300">Assignments Pending</p>
    </div>
  </div>
</section>

<!-- PORTAL CARDS -->
<div class="min-h-screen flex items-center justify-center px-4 sm:px-6 -mt-12 sm:-mt-16">
  <div class="w-full max-w-6xl space-y-14 sm:space-y-16">

    <!-- STUDENT PORTALS -->
    {% if 'student' in roles %}
    <div>
      <h3 class="text-xl sm:text-2xl font-bold text-indigo-700 mb-6 flex items-center gap-2">
        ğŸ“ Student Portals
      </h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8">
        <a href="{% url 'students:student_dashboard' %}" class="portal-card bg-gradient-to-r from-indigo-500 to-indigo-600">
          ğŸ“Š Student Dashboard
        </a>
        <a href="{% url 'results:student_portal' %}" class="portal-card bg-gradient-to-r from-purple-500 to-purple-600">
          ğŸ“ Result Portal
        </a>
      </div>
    </div>
    {% endif %}

    <!-- TEACHER PORTALS -->
    {% if 'teacher' in roles %}
    <div>
      <h3 class="text-xl sm:text-2xl font-bold text-green-700 mb-6 flex items-center gap-2">
        ğŸ§‘â€ğŸ« Teacher Portals
      </h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
        <a href="{% url 'teachers:teacher_dashboard' %}" class="portal-card bg-gradient-to-r from-green-500 to-green-600">
          ğŸ“š Teacher Dashboard
        </a>
        <a href="{% url 'teachers:teacher_result_dashboard' %}" class="portal-card bg-gradient-to-r from-blue-500 to-blue-600">
          âœï¸ Enter Scores & Domains
        </a>
        <a href="{% url 'results:teacher_portal' %}" class="portal-card bg-gradient-to-r from-pink-500 to-pink-600">
          ğŸ§¾ Teacher Result Portal
        </a>
      </div>
    </div>
    {% endif %}

    <!-- SCHOOL ADMIN -->
    {% if 'schooladmin' in roles %}
    <div>
      <h3 class="text-xl sm:text-2xl font-bold text-indigo-700 mb-6">ğŸ« School Admin Portals</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8">
        {% if school %}
          <a href="{% url 'school_admin:school_admin_dashboard' school.id %}" class="portal-card bg-gradient-to-r from-indigo-500 to-indigo-600">
            ğŸ¢ School Admin Dashboard
          </a>
        {% else %}
          <p class="text-red-500 font-bold text-lg">No school assigned</p>
        {% endif %}
      </div>
    </div>
    {% endif %}

    <!-- ACCOUNTANT -->
{% if 'accountant' in roles %}
<div>
  <h3 class="text-xl sm:text-2xl font-bold text-yellow-700 mb-6">
    ğŸ’° Accountant / Finance Portals
  </h3>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">

    <!-- Dashboard -->
    <a href="{% url 'finance:dashboard' %}"
       class="portal-card bg-gradient-to-r from-yellow-500 to-yellow-600">
      ğŸ“ˆ Finance Dashboard
    </a>

    <!-- Invoices -->
    <a href="{% url 'finance:invoice_list' %}"
       class="portal-card bg-gradient-to-r from-orange-500 to-orange-600">
      ğŸ“„ View Invoices
    </a>

    <a href="{% url 'finance:invoice_create' %}"
       class="portal-card bg-gradient-to-r from-indigo-500 to-indigo-600">
      â• Create Invoice
    </a>

    <a href="{% url 'finance:generate_invoices' %}"
       class="portal-card bg-gradient-to-r from-green-500 to-green-600">
      âš™ï¸ Generate Invoices
    </a>

    <!-- Payments -->
    <a href="{% url 'finance:payment_list' %}"
       class="portal-card bg-gradient-to-r from-emerald-500 to-emerald-600">
      ğŸ’µ Payments
    </a>

    <a href="{% url 'finance:record_payment' %}"
       class="portal-card bg-gradient-to-r from-teal-500 to-teal-600">
      ğŸ’³ Record Payment
    </a>

    <!-- Fees -->
    <a href="{% url 'finance:fee_template_list' %}"
       class="portal-card bg-gradient-to-r from-purple-500 to-purple-600">
      ğŸ· Fee Templates
    </a>

    <!-- Reports -->
    <a href="{% url 'finance:financial_reports' %}"
       class="portal-card bg-gradient-to-r from-slate-600 to-slate-700">
      ğŸ“Š Financial Reports
      <span class="text-sm opacity-90">(Session / Term)</span>
    </a>

  </div>
</div>
{% endif %}


    <!-- SUPER ADMIN -->
    {% if 'superadmin' in roles %}
    <div>
      <h3 class="text-xl sm:text-2xl font-bold text-indigo-700 mb-6">ğŸ›  Super Admin Portals</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8">
        <a href="{% url 'superadmin:dashboard' %}" class="portal-card bg-gradient-to-r from-indigo-500 to-indigo-600">
          ğŸ›¡ Super Admin Dashboard
        </a>
      </div>
    </div>
    {% endif %}

  </div>
</div>

<!-- PORTAL CARD STYLES -->
<style>
.portal-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  text-align: center;
  color: white;
  padding: 2rem;
  border-radius: 1.25rem;
  font-size: 1.1rem;
  min-height: 140px;
  box-shadow: 0 10px 15px rgba(0,0,0,0.1);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
@media (min-width: 640px) { .portal-card { padding: 2.5rem; font-size: 1.3rem; min-height: 170px; } }
@media (min-width: 1024px) { .portal-card { padding: 3rem; font-size: 1.5rem; min-height: 200px; } }
.portal-card:hover, .portal-card:active { transform: translateY(-6px) scale(1.02); box-shadow: 0 15px 25px rgba(0,0,0,0.2); }
</style>

{% endblock %}
